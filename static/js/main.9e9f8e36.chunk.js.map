{"version":3,"sources":["jazzscript/jazzscript.constants.ts","jazzscript/jazzscript.ts","ItemPicker.tsx","ScalePicker.tsx","Keyboard.tsx","App.tsx","index.tsx"],"names":["Steps","notes","Map","audioContext","oscillator","gain","filter","majorScaleDegrees","Whole","Half","naturalMinorScaleDegrees","melodicMinorScaleDegrees","harmonicMinorScaleDegrees","lydianScaleDegrees","satieScaleDegrees","alteredScaleDegrees","dimDomScaleDegrees","dorianScaleDegrees","scales","getAvailableNotes","noteNames","forEach","value","key","push","getAvailableFrequencies","noteFrequencies","playSequence","frequencies","timePerNote","frequency","i","setValueAtTime","currentTime","linearRampToValueAtTime","getScaleTones","scale","allNotes","noteIndexes","scaleSteps","get","currentIndex","findIndex","note","startsWith","step","getNoteIndexesForScale","map","index","ItemPicker","selected","itemName","setNewSelected","className","onClick","replace","slice","scaleNames","getAvailableScales","ScalePicker","keyCenter","setKeyCenter","setScale","currentNote","currentScale","Keyboard","selectedKey","quizzing","playSingleNote","quizState","keys","getKeyClass","isBlackKey","current","currentFrequency","quizScaleFrequencies","quizStep","includes","checkForAndInitAudioContext","AudioContext","createOscillator","type","start","createGain","connect","createBiquadFilter","destination","flashScreenColor","document","body","classList","add","setTimeout","remove","App","useState","setSelectedKey","setQuizState","setQuizzing","playCurrentScale","scaleTones","length","playScale","noteCount","interval","setInterval","clearInterval","noteIndex","useEffect","playNote","newState","correct","disabled","quizArr","undefined","quizCurrentScale","ReactDOM","render","StrictMode","getElementById"],"mappings":"gLA2BKA,E,sDA3BQC,G,MAAQ,IAAIC,IAAoB,CAC3C,CAAC,KAAM,KACP,CAAC,MAAO,QACR,CAAC,KAAM,QACP,CAAC,MAAO,QACR,CAAC,KAAM,QACP,CAAC,KAAM,QACP,CAAC,MAAO,QACR,CAAC,KAAM,KACP,CAAC,MAAO,OACR,CAAC,KAAM,KACP,CAAC,MAAO,QACR,CAAC,KAAM,QACP,CAAC,KAAM,QACP,CAAC,MAAO,QACR,CAAC,KAAM,QACP,CAAC,MAAO,QACR,CAAC,KAAM,QACP,CAAC,KAAM,QACP,CAAC,MAAO,QACR,CAAC,KAAM,QACP,CAAC,MAAO,QACR,CAAC,KAAM,KACP,CAAC,MAAO,QACR,CAAC,KAAM,Y,SAGJF,O,eAAAA,I,kBAAAA,M,KAKL,ICzBIG,EACAC,EACAC,EACAC,EDsBEC,EAAkC,CACtCP,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,MAGFC,EAAyC,CAC7CV,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,OAGFG,EAAyC,CAC7CX,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,MAGFG,EAA0C,CAC9CZ,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MAAQR,EAAMS,KACpBT,EAAMS,MAGFI,EAAmC,CACvCb,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,MAGFK,EAAkC,CACtCd,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MAAQR,EAAMS,KACpBT,EAAMS,KACNT,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,OAGFO,EAAoC,CACxCf,EAAMS,KACNT,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,OAGFQ,EAAmC,CACvChB,EAAMS,KACNT,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMS,MAGFQ,EAAmC,CACvCjB,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,MACNR,EAAMQ,MACNR,EAAMQ,MACNR,EAAMS,KACNT,EAAMQ,OAGKU,EAAS,IAAIhB,IAA2B,CACnD,CAAC,QAASK,GACV,CAAC,SAAUM,GACX,CAAC,eAAgBH,GACjB,CAAC,eAAgBC,GACjB,CAAC,gBAAiBC,GAClB,CAAC,SAAUK,GACX,CAAC,QAASH,GACV,CAAC,UAAWC,GACZ,CAAC,SAAUC,KCnGN,SAASG,IACd,IAAMC,EAA2B,GAEjC,OADAnB,EAAMoB,SAAQ,SAACC,EAAeC,GAAhB,OAAgCH,EAAUI,KAAKD,MACtDH,EAGF,SAASK,IACd,IAAMC,EAAiC,GAEvC,OADAzB,EAAMoB,SAAQ,SAACC,EAAeC,GAAhB,OAAgCG,EAAgBF,KAAKF,MAC5DI,EASF,SAASC,EACdC,EACAC,GAEA,OAAO,WACLD,EAAYP,SAAQ,SAACS,EAAWC,GAC9B3B,EAAW0B,UAAUE,eACnBF,EACA3B,EAAa8B,YAAcJ,EAAcE,GAE3C1B,EAAKA,KAAK6B,wBACR,GACA/B,EAAa8B,YAAcJ,EAAcE,GAE3CzB,EAAOwB,UAAUI,wBACf,KACA/B,EAAa8B,YAAcJ,EAAcE,GAE3C1B,EAAKA,KAAK6B,wBACR,EACA/B,EAAa8B,YAAcJ,GAAeE,EAAI,IAEhDzB,EAAOwB,UAAUI,wBACf,IACA/B,EAAa8B,YAAcJ,GAAeE,EAAI,QAsB/C,SAASI,EAAcZ,EAAaa,GACzC,IAAMC,EAAWlB,IAKjB,OAtBF,SAAgCI,EAAaa,GAC3C,IAAME,EAA6B,GAC7BC,EAAarB,EAAOsB,IAAIJ,GAC9B,IAAKG,EACH,MAAO,GAET,IACIE,EADatB,IACWuB,WAAU,SAACC,GAAD,OAAUA,EAAKC,WAAWrB,MAMhE,OALAe,EAAYd,KAAKiB,GACjBF,EAAWlB,SAAQ,SAACwB,GAClBJ,GAAgBI,EAChBP,EAAYd,KAAKiB,MAEZH,EAKqBQ,CAAuBvB,EAAKa,GACnBW,KACnC,SAACC,GAAD,OAAW/C,EAAMuC,IAAIH,EAASW,OChFnBC,MAZf,YAA8E,IAAxDC,EAAuD,EAAvDA,SAAUC,EAA6C,EAA7CA,SAAUC,EAAmC,EAAnCA,eACpCC,EAAY,OAIhB,OAHIH,IACFG,GAAa,aAGb,yBAAKA,UAAWA,EAAWC,QAAS,kBAAMF,EAAeD,KACtDA,EAASI,QAAQ,OAAQ,IAAIA,QAAQ,YAAa,SCJnDtD,EAAQkB,IAAoBqC,MAAM,EAAG,IACrCtC,EFgCC,WACL,IAAMuC,EAA4B,GAElC,OADAvC,EAAOG,SAAQ,SAACC,EAAOC,GAAR,OAAgBkC,EAAWjC,KAAKD,MACxCkC,EEnCMC,GAkCAC,MAhCf,YAKsB,IAJpBC,EAImB,EAJnBA,UACAC,EAGmB,EAHnBA,aACAzB,EAEmB,EAFnBA,MACA0B,EACmB,EADnBA,SAEA,OACE,yBAAKT,UAAU,wBACb,yBAAKA,UAAU,SACZpD,EAAM8C,KAAI,SAACgB,GAAD,OACT,kBAAC,EAAD,CACExC,IAAKwC,EACLb,SAAUU,IAAcG,EACxBZ,SAAUY,EACVX,eAAgBS,QAItB,yBAAKR,UAAU,SACZnC,EAAO6B,KAAI,SAACiB,GAAD,OACV,kBAAC,EAAD,CACEzC,IAAKyC,EACLd,SAAUc,IAAiB5B,EAC3Be,SAAUa,EACVZ,eAAgBU,UC0BbG,MA9Cf,YAKmB,IAJjBC,EAIgB,EAJhBA,YACAC,EAGgB,EAHhBA,SACAC,EAEgB,EAFhBA,eACAC,EACgB,EADhBA,UAEMC,EAAO7C,IAEb,SAAS8C,EAAYvB,GACnB,IAAIK,EAAY,GAUhB,IA1BJ,SAAoBL,GAIlB,OAHIA,EAAQ,KACVA,GAAS,IAEHA,GAAS,GAAKA,EAAQ,IAAM,GAAOA,EAAQ,GAAKA,EAAQ,IAAM,EAchEwB,CAAWxB,GAGbK,GAAa,WAFbA,GAAa,WAIXa,IAAgBlB,IAClBK,GAAa,gBAEXc,EAAU,CACZ,IAAM1B,EAAe4B,EAAU3B,WAAU,SAACC,GAAD,OAA2B,IAAjBA,EAAK8B,WAClDC,EAAmBL,EAAU5B,GAAcX,UAC3C6C,EAAuBN,EAAUtB,KAAI,SAAA6B,GAAQ,OAAIA,EAAS9C,aAE9DwC,EAAKtB,GAAS0B,GACdC,EAAqBE,SAASP,EAAKtB,MAEnCK,GAAa,eAGjB,OAAOA,EAGT,OACE,yBAAKA,UAAU,YACZiB,EAAKvB,KAAI,SAACjB,EAAWC,GAAZ,OACR,yBACER,IAAKQ,EACLuB,QAAS,kBAAMc,EAAetC,IAC9BuB,UAAWkB,EAAYxC,UCrC3BH,EAAcH,IAEpB,SAASqD,IJTP3E,EAAe,IAAI4E,cACnB3E,EAAaD,EAAa6E,oBACfC,KAAO,WAClB7E,EAAW8E,SACX7E,EAAOF,EAAagF,cACf9E,KAAKiB,MAAQ,EAClBlB,EAAWgF,QAAQ/E,IACnBC,EAASH,EAAakF,sBACfvD,UAAUR,MAAQ,IACzBjB,EAAK+E,QAAQ9E,GACbA,EAAO8E,QAAQjF,EAAamF,aIK9B,SAASC,EAAiBlC,GACxBmC,SAASC,KAAKC,UAAUC,IAAItC,GAC5BuC,YAAW,WACTJ,SAASC,KAAKC,UAAUG,OAAOxC,KAC9B,KAgHUyC,MA7Gf,WAAgB,IAAD,EACqBC,mBAAS,MAD9B,mBACNnC,EADM,KACKC,EADL,OAEakC,mBAAS,SAFtB,mBAEN3D,EAFM,KAEC0B,EAFD,OAGyBiC,oBAAU,GAHnC,mBAGN7B,EAHM,KAGO8B,EAHP,OAIqBD,mBAA0B,IAJ/C,mBAIN1B,EAJM,KAIK4B,EAJL,OAKmBF,oBAAS,GAL5B,mBAKN5B,EALM,KAKI+B,EALJ,KAwCb,SAASC,IACPrB,IACA,IAAMd,EAAe7B,EAAcyB,EAAWxB,GACxC+D,EJ2BH,SAAmB5E,EAAaa,GACrC,IAAMgE,EAAajE,EAAcZ,EAAKa,GACtC,OAAOT,EAAayE,EAAY,IAAMA,EAAWC,QI7BtBC,CAAU1C,EAAWxB,GAC1CmE,EAAoB,EAClBC,EAAWC,aAAY,WAC3B,GAAkB,IAAdF,EACFG,cAAcF,GACdR,GAAgB,OACX,CACa,IAAdO,GACFJ,IAEF,IAAMQ,EAAY/E,EAAYc,WAC5B,SAACX,GAAD,OAAOA,IAAMiC,EAAauC,MAE5BP,EAAeW,GACfJ,OAED,KAmBL,OAvEAK,qBAAU,WACRV,GAAY,GACZD,EAAa,MACZ,CAACrC,EAAWxB,IAqEb,yBAAKiB,UAAU,OACb,oDACA,kBAAC,EAAD,CACEO,UAAWA,EACXC,aAAcA,EACdzB,MAAOA,EACP0B,SAAUA,IAEZ,kBAAC,EAAD,CACEI,YAAaA,EACbC,SAAUA,EACVC,eA9EN,SAAwBtC,GAGtB,GAFiBH,EAAa,CAACG,GAAY,GAC3C+E,GACI1C,EAAU,CACZ,IAAM1B,EAAe4B,EAAU3B,WAAU,SAACC,GAAD,OAA2B,IAAjBA,EAAK8B,WACxD,GAAI3C,IAAcuC,EAAU5B,GAAcX,UAExCoE,GAAY,GACZD,EAAa,IACbV,EAAiB,kBACZ,CAEL,IAAMuB,EAAQ,YAAOzC,GACrByC,EAASrE,GAAcgC,SAAU,EACjCqC,EAASrE,GAAcsE,SAAU,EAC7BD,EAASrE,EAAe,IAC1BqE,EAASrE,EAAe,GAAGgC,SAAU,EACrCwB,EAAaa,KAGbZ,GAAY,GACZD,EAAa,IACbV,EAAiB,kBAyDnBlB,UAAWA,IAEb,yBAAKhB,UAAU,kBACb,4BAAQA,UAAU,UAAUC,QAAS,kBAAM6C,MAA3C,QAGA,4BACE9C,UAAU,UACV2D,SAAU7C,EACVb,QAAS,kBAtCjB,WACEwB,IACA,IAAMd,EAAe7B,EAAcyB,EAAWxB,GACxC6E,EAA2B,GACjCjD,EAAa3C,SAAQ,SAACS,GAAD,OACnBmF,EAAQzF,KAAK,CACXM,UAAWA,EACXiF,aAASG,EACTzC,SAAS,OAGbwC,EAAQ,GAAGxC,SAAU,EACrBwB,EAAagB,GACbf,GAAY,GAyBSiB,KAHjB,WC/HRC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF9B,SAAS+B,eAAe,U","file":"static/js/main.9e9f8e36.chunk.js","sourcesContent":["export const notes = new Map<string, number>([\n  [\"C4\", 261],\n  [\"C#4\", 277.18],\n  [\"D4\", 293.66],\n  [\"D#4\", 311.13],\n  [\"E4\", 329.63],\n  [\"F4\", 349.23],\n  [\"F#4\", 369.99],\n  [\"G4\", 392],\n  [\"G#4\", 415.3],\n  [\"A4\", 440],\n  [\"A#4\", 466.16],\n  [\"B4\", 493.88],\n  [\"C5\", 523.25],\n  [\"C#5\", 554.37],\n  [\"D5\", 587.33],\n  [\"D#5\", 622.25],\n  [\"E5\", 659.25],\n  [\"F5\", 698.46],\n  [\"F#5\", 739.99],\n  [\"G5\", 783.99],\n  [\"G#5\", 830.61],\n  [\"A5\", 880],\n  [\"A#5\", 932.33],\n  [\"B5\", 987.77],\n]);\n\nenum Steps {\n  Half = 1,\n  Whole = 2,\n}\n\nconst majorScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n];\n\nconst naturalMinorScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n];\n\nconst melodicMinorScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n];\n\nconst harmonicMinorScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole + Steps.Half,\n  Steps.Half,\n];\n\nconst lydianScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n];\n\nconst satieScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole + Steps.Half,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole\n]\n\nconst alteredScaleDegrees: Array<Steps> = [\n  Steps.Half,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n];\n\nconst dimDomScaleDegrees: Array<Steps> = [\n  Steps.Half,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Half\n]\n\nconst dorianScaleDegrees: Array<Steps> = [\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Whole,\n  Steps.Half,\n  Steps.Whole,\n];\n\nexport const scales = new Map<string, Array<number>>([\n  [\"Major\", majorScaleDegrees],\n  [\"Lydian\", lydianScaleDegrees],\n  [\"NaturalMinor\", naturalMinorScaleDegrees],\n  [\"MelodicMinor\", melodicMinorScaleDegrees],\n  [\"HarmonicMinor\", harmonicMinorScaleDegrees],\n  [\"Dorian\", dorianScaleDegrees],\n  [\"Satie\", satieScaleDegrees],\n  [\"Altered\", alteredScaleDegrees],\n  [\"DimDom\", dimDomScaleDegrees]\n]);\n","import { notes, scales } from \"./jazzscript.constants\";\n\ntype scaleAndPlayScale = {\n  scale: Array<number>;\n  playScale: Function;\n};\n\nlet audioContext: AudioContext;\nlet oscillator: OscillatorNode;\nlet gain: GainNode;\nlet filter: BiquadFilterNode;\n\nexport function initAudioContext(): AudioContext {\n  audioContext = new AudioContext();\n  oscillator = audioContext.createOscillator();\n  oscillator.type = \"sawtooth\";\n  oscillator.start();\n  gain = audioContext.createGain();\n  gain.gain.value = 0;\n  oscillator.connect(gain);\n  filter = audioContext.createBiquadFilter();\n  filter.frequency.value = 1000;\n  gain.connect(filter);\n  filter.connect(audioContext.destination);\n  return audioContext;\n}\n\n\nexport function getAudioContext(): AudioContext {\n  return audioContext;\n}\n\nexport function getAvailableNotes(): Array<string> {\n  const noteNames: Array<string> = [];\n  notes.forEach((value: number, key: string) => noteNames.push(key));\n  return noteNames;\n}\n\nexport function getAvailableFrequencies(): Array<number> {\n  const noteFrequencies: Array<number> = [];\n  notes.forEach((value: number, key: string) => noteFrequencies.push(value));\n  return noteFrequencies;\n}\n\nexport function getAvailableScales(): Array<string> {\n  const scaleNames: Array<string> = [];\n  scales.forEach((value, key) => scaleNames.push(key));\n  return scaleNames;\n}\n\nexport function playSequence(\n  frequencies: Array<number>,\n  timePerNote: number\n): Function {\n  return () => {\n    frequencies.forEach((frequency, i) => {\n      oscillator.frequency.setValueAtTime(\n        frequency,\n        audioContext.currentTime + timePerNote * i\n      );\n      gain.gain.linearRampToValueAtTime(\n        0.2,\n        audioContext.currentTime + timePerNote * i\n      );\n      filter.frequency.linearRampToValueAtTime(\n        1500,\n        audioContext.currentTime + timePerNote * i\n      );\n      gain.gain.linearRampToValueAtTime(\n        0,\n        audioContext.currentTime + timePerNote * (i + 1)\n      );\n      filter.frequency.linearRampToValueAtTime(\n        1000,\n        audioContext.currentTime + timePerNote * (i + 1)\n      );\n    });\n  };\n}\n\nfunction getNoteIndexesForScale(key: string, scale: string): Array<number> {\n  const noteIndexes: Array<number> = [];\n  const scaleSteps = scales.get(scale);\n  if (!scaleSteps) {\n    return [];\n  }\n  const allNotes = getAvailableNotes();\n  let currentIndex = allNotes.findIndex((note) => note.startsWith(key));\n  noteIndexes.push(currentIndex);\n  scaleSteps.forEach((step) => {\n    currentIndex += step;\n    noteIndexes.push(currentIndex);\n  });\n  return noteIndexes;\n}\n\nexport function getScaleTones(key: string, scale: string): Array<number> {\n  const allNotes = getAvailableNotes();\n  const noteIndexesForScale = getNoteIndexesForScale(key, scale);\n  let scaleTones = noteIndexesForScale.map(\n    (index) => notes.get(allNotes[index])!\n  );\n  return scaleTones;\n}\n\nexport function playScale(key: string, scale: string): Function {\n  const scaleTones = getScaleTones(key, scale);\n  return playSequence(scaleTones, 2.5 / scaleTones.length);\n}\n","import React from \"react\";\n\ntype ItemPickerProps = {\n  selected: boolean;\n  itemName: string;\n  setNewSelected: Function;\n};\n\nfunction ItemPicker({ selected, itemName, setNewSelected }: ItemPickerProps) {\n  let className = \"item\";\n  if (selected) {\n    className += \" selected\";\n  }\n  return (\n    <div className={className} onClick={() => setNewSelected(itemName)}>\n      {itemName.replace(/\\d+/g, \"\").replace(/([A-Z]+)/g, \" $1\")}\n    </div>\n  );\n}\n\nexport default ItemPicker;\n","import React from \"react\";\nimport { getAvailableNotes, getAvailableScales } from \"./jazzscript/jazzscript\";\nimport ItemPicker from \"./ItemPicker\";\n\ntype ScalePickerProps = {\n  keyCenter: string;\n  setKeyCenter: Function;\n  scale: string;\n  setScale: Function;\n};\n\nconst notes = getAvailableNotes().slice(0, 12);\nconst scales = getAvailableScales();\n\nfunction ScalePicker({\n  keyCenter,\n  setKeyCenter,\n  scale,\n  setScale,\n}: ScalePickerProps) {\n  return (\n    <div className=\"flexbox space-around\">\n      <div className=\"items\">\n        {notes.map((currentNote) => (\n          <ItemPicker\n            key={currentNote}\n            selected={keyCenter === currentNote}\n            itemName={currentNote}\n            setNewSelected={setKeyCenter}\n          />\n        ))}\n      </div>\n      <div className=\"items\">\n        {scales.map((currentScale) => (\n          <ItemPicker\n            key={currentScale}\n            selected={currentScale === scale}\n            itemName={currentScale}\n            setNewSelected={setScale}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default ScalePicker;\n","import React from \"react\";\nimport { getAvailableFrequencies } from \"./jazzscript/jazzscript\";\nimport { QuizNote } from \"./App\";\n\ntype KeyboardProps = {\n  selectedKey: number;\n  quizzing: boolean;\n  playSingleNote: Function;\n  quizState: Array<QuizNote>;\n};\n\nfunction isBlackKey(index: number) {\n  if (index > 11) {\n    index -= 12;\n  }\n  return (index <= 4 && index % 2 !== 0) || (index > 4 && index % 2 === 0);\n}\n\nfunction Keyboard({\n  selectedKey,\n  quizzing,\n  playSingleNote,\n  quizState\n}: KeyboardProps) {\n  const keys = getAvailableFrequencies();\n\n  function getKeyClass(index: number): string {\n    let className = \"\";\n\n    if (isBlackKey(index)) {\n      className += \"blackKey\";\n    } else {\n      className += \"whiteKey\";\n    }\n    if (selectedKey === index) {\n      className += \" selectedKey\";\n    }\n    if (quizzing) {\n      const currentIndex = quizState.findIndex((note) => note.current === true);\n      const currentFrequency = quizState[currentIndex].frequency;\n      const quizScaleFrequencies = quizState.map(quizStep => quizStep.frequency);\n      if (\n        keys[index] < currentFrequency &&\n        quizScaleFrequencies.includes(keys[index])\n      ) {\n        className += \" successKey\";\n      }\n    }\n    return className;\n  }\n\n  return (\n    <div className=\"keyboard\">\n      {keys.map((frequency, i) => (\n        <div\n          key={i}\n          onClick={() => playSingleNote(frequency)}\n          className={getKeyClass(i)}\n        ></div>\n      ))}\n    </div>\n  );\n}\n\nexport default Keyboard;\n","import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport \"./ScalePicker\";\nimport {\n  playScale,\n  getAvailableFrequencies,\n  playSequence,\n  getScaleTones,\n  initAudioContext\n} from \"./jazzscript/jazzscript\";\nimport ScalePicker from \"./ScalePicker\";\nimport Keyboard from \"./Keyboard\";\n\nexport type QuizNote = {\n  frequency: number;\n  correct: boolean | undefined;\n  current: boolean;\n};\n\nlet audioContextInitialized: boolean = false;\nconst frequencies = getAvailableFrequencies();\n\nfunction checkForAndInitAudioContext() {\n  if (!audioContextInitialized) {\n    initAudioContext();\n  }\n}\n\nfunction flashScreenColor(className: string) {\n  document.body.classList.add(className);\n  setTimeout(() => {\n    document.body.classList.remove(className);\n  }, 2000);\n}\n\nfunction App() {\n  const [keyCenter, setKeyCenter] = useState(\"C4\");\n  const [scale, setScale] = useState(\"Major\");\n  const [selectedKey, setSelectedKey] = useState(-1);\n  const [quizState, setQuizState] = useState<Array<QuizNote>>([]);\n  const [quizzing, setQuizzing] = useState(false);\n\n  useEffect(() => {\n    setQuizzing(false);\n    setQuizState([]);\n  }, [keyCenter, scale]);\n\n  function playSingleNote(frequency: number) {\n    const playNote = playSequence([frequency], 0.3);\n    playNote();\n    if (quizzing) {\n      const currentIndex = quizState.findIndex((note) => note.current === true);\n      if (frequency !== quizState[currentIndex].frequency) {\n        // wrong key, failed\n        setQuizzing(false);\n        setQuizState([]);\n        flashScreenColor('quizFailed');\n      } else {\n        // right key, advance the quiz to next note\n        const newState = [...quizState];\n        newState[currentIndex].current = false;\n        newState[currentIndex].correct = true;\n        if (newState[currentIndex + 1]) {\n          newState[currentIndex + 1].current = true;\n          setQuizState(newState);\n        } else {\n          // we don't have a next note, end of the quiz, passed\n          setQuizzing(false);\n          setQuizState([]);\n          flashScreenColor('quizPassed');\n        }\n      }\n    }\n  }\n\n  function playCurrentScale() {\n    checkForAndInitAudioContext();\n    const currentScale = getScaleTones(keyCenter, scale);\n    const playCurrentScale = playScale(keyCenter, scale);\n    let noteCount: number = 0;\n    const interval = setInterval(() => {\n      if (noteCount === 8) {\n        clearInterval(interval);\n        setSelectedKey(-1);\n      } else {\n        if (noteCount === 0) {\n          playCurrentScale();\n        }\n        const noteIndex = frequencies.findIndex(\n          (i) => i === currentScale[noteCount]\n        );\n        setSelectedKey(noteIndex);\n        noteCount++;\n      }\n    }, 312);\n  }\n\n  function quizCurrentScale() {\n    checkForAndInitAudioContext();\n    const currentScale = getScaleTones(keyCenter, scale);\n    const quizArr: Array<QuizNote> = [];\n    currentScale.forEach((frequency) =>\n      quizArr.push({\n        frequency: frequency,\n        correct: undefined,\n        current: false,\n      })\n    );\n    quizArr[0].current = true;\n    setQuizState(quizArr);\n    setQuizzing(true);\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>practice your scales</h1>\n      <ScalePicker\n        keyCenter={keyCenter}\n        setKeyCenter={setKeyCenter}\n        scale={scale}\n        setScale={setScale}\n      />\n      <Keyboard\n        selectedKey={selectedKey}\n        quizzing={quizzing}\n        playSingleNote={playSingleNote}\n        quizState={quizState}\n      />\n      <div className=\"flexbox center\">\n        <button className=\"playBtn\" onClick={() => playCurrentScale()}>\n          play\n        </button>\n        <button\n          className=\"quizBtn\"\n          disabled={quizzing}\n          onClick={() => quizCurrentScale()}\n        >\n          quiz\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}